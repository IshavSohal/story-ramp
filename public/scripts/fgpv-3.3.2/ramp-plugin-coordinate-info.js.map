{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../ramp-plugin-coordinate-info/dist/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","window","CoordinateInfo","e","default","this","urls","nts","utm","alti","decli","init","api","button","mapI","addPluginButton","translations","_RV","getCurrentLang","coordButtonLabel","onMenuItemClick","mapDiv","getAttributeNode","layers","identifyMode","panel","close","destroy","toggleActive","toggleSideNav","handler","document","createAttribute","setAttributeNode","unsubscribe","setMapCursor","isActive","removeAttributeNode","click","subscribe","clickHandler","xy","spatialReference","convertDDToDMS","y","x","a","Date","toISOString","substr","push","Promise","$","ajax","url","cache","data","bbox","dataType","success","parseNTS","features","parseUtm","lat","lon","altitude","latitude","longitude","date","format","parseDecli","error","all","then","generateOutput","template","replace","toFixed","zone","outPt","nts250","nts50","magSection","magnetic","annChange","compass","panels","element","css","bottom","width","addClass","header","closeButton","title","body","open","length","properties","identifier","projectGeometry","parseInt","components","D","String","fromCharCode","annual_change","dD","plugin","coordInfo","magCompassOut","coordSection","coordLat","coordLong","coordDecimal","coordDMS","utmSection","utmZone","utmEast","utmNorth","ntsSection","altiSection","magDate","magDecli","magChange","magDecliOut"],"mappings":"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","file":"ramp-plugin-coordinate-info.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n \tvar sriHashes = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 528);\n","window.CoordinateInfo=function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,\"a\",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=\"\",n(n.s=0)}([function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(1),i=function(){function t(){this.urls={nts:\"https://geogratis.gc.ca/services/delimitation/en/nts?\",utm:\"https://geogratis.gc.ca/services/delimitation/en/utmzone?\",alti:\"https://geogratis.gc.ca/services/elevation/cdem/altitude?\",decli:\"https://geomag.nrcan.gc.ca/service/tools/magnetic/calculator/?\"}}return t.prototype.init=function(e){this.api=e,this.button=this.api.mapI.addPluginButton(t.prototype.translations[this._RV.getCurrentLang()].coordButtonLabel,this.onMenuItemClick()),null!==this.api.mapDiv[0].getAttributeNode(\"coord-info-active\")&&(this.api.layers.identifyMode=\"none\",void 0!==this.panel&&(this.panel.close({destroy:!0}),this.panel=void 0),this.toggleActive())},t.prototype.onMenuItemClick=function(){var t,e=this;return function(){if(e._RV.toggleSideNav(\"close\"),void 0===e.handler){t=e.toggleActive();var n=document.createAttribute(\"coord-info-active\");e.api.mapDiv[0].setAttributeNode(n)}else{e.handler.unsubscribe(),e.handler=void 0,e._RV.setMapCursor(\"\"),e.button.isActive=!1,e.api.layers.identifyMode=t;n=e.api.mapDiv[0].getAttributeNode(\"coord-info-active\");e.api.mapDiv[0].removeAttributeNode(n)}}},t.prototype.toggleActive=function(){var t=this;this.handler=this.api.click.subscribe((function(e){return t.clickHandler(e)})),this.button.isActive=!0,this._RV.setMapCursor(\"crosshair\");var e=this.api.layers.identifyMode;return this.api.layers.identifyMode=\"none\",e},t.prototype.clickHandler=function(t){var e=this,n=this._RV.getCurrentLang(),o=t.xy;o.spatialReference=4326;var i=this._RV.convertDDToDMS(o.y,o.x),a=(new Date).toISOString().substr(0,10),r=[];r.push(new Promise((function(t){$.ajax({url:e.urls.nts,cache:!1,data:{bbox:o.x+\",\"+o.y+\",\"+o.x+\",\"+o.y},dataType:\"jsonp\",success:function(n){return t(e.parseNTS(n.features))}})}))),r.push(new Promise((function(t){$.ajax({url:e.urls.utm,cache:!1,data:{bbox:o.x+\",\"+o.y+\",\"+o.x+\",\"+o.y},dataType:\"jsonp\",success:function(n){return t(e.parseUtm(n.features,o))}})}))),r.push(new Promise((function(t){$.ajax({url:e.urls.alti,cache:!1,data:{lat:o.y,lon:o.x},dataType:\"jsonp\",success:function(e){return t(null!==e.altitude?e.altitude:0)}})}))),r.push(new Promise((function(t){$.ajax({url:e.urls.decli,cache:!0,data:{latitude:o.y,longitude:o.x,date:a,format:\"json\"},dataType:\"jsonp\",success:function(o){return t(e.parseDecli(o,n))},error:function(){t(void 0)}})}))),Promise.all(r).then((function(t){e.generateOutput(t,o,i,a)}))},t.prototype.generateOutput=function(t,e,n,i){var a=o.template.replace(/{pt.y}/,e.y.toFixed(6)).replace(/{pt.x}/,e.x.toFixed(6)).replace(/{dms.y}/,n.y).replace(/{dms.x}/,n.x).replace(/{zone}/,t[1].zone).replace(/{outPt.x}/,t[1].outPt.x).replace(/{outPt.y}/,t[1].outPt.y).replace(/{nts250}/,t[0].nts250).replace(/{nts50}/,t[0].nts50).replace(/{elevation}/,t[2]);if(t[3]){var r=o.magSection.replace(/{date}/,i).replace(/{magnetic}/,t[3].magnetic).replace(/{annChange}/,t[3].annChange).replace(/{compass}/,t[3].compass);a=a.replace(/{magSection}/,r)}else a=a.replace(/{magSection}/,\"\");if(this.panel)this.panel.close();else{this.panel=this.api.panels.create(\"coord-info\"),this.panel.element.css({bottom:\"0em\",width:\"400px\"}),this.panel.element.addClass(\"mobile-fullscreen\");this.panel.header.closeButton;this.panel.header.title=\"plugins.coordInfo.coordButtonLabel\"}this.panel.body=a,this.panel.open()},t.prototype.parseNTS=function(t){return{nts250:t.length>0?t[0].properties.identifier+\"-\"+t[0].properties.name:\"\",nts50:t.length>1?t[1].properties.identifier+\"-\"+t[1].properties.name:\"\"}},t.prototype.parseUtm=function(t,e){if(0===t.length)return{zone:\"Error\",outPt:{x:\"-\",y:\"-\"}};var n=t[0].properties.identifier;n<10&&(n=\"0\"+n);var o=this._RV.projectGeometry(e,parseInt(\"326\"+n));return{zone:n,outPt:{x:o.x,y:o.y}}},t.prototype.parseDecli=function(e,n){return{magnetic:null!==e.components.D?\"\"+e.components.D+String.fromCharCode(176):\"---\",annChange:null!==e.annual_change.dD?e.annual_change.dD:\"---\",compass:\"useless\"!==e.compass?\"\":t.prototype.translations[n].plugin.coordInfo.magCompassOut}},t}();e.default=i,i.prototype.translations={\"en-CA\":{coordButtonLabel:\"Coords Info\",title:\"Map location information\",coordSection:\"Geographic Coordinates\",coordLat:\"Latitude: \",coordLong:\"Longitude: \",coordDecimal:\"Degrees Decimal: \",coordDMS:\"Degrees Minutes Seconds (DMS): \",utmSection:\"UTM Coordinates\",utmZone:\"Zone: \",utmEast:\"Easting: \",utmNorth:\"Northing: \",ntsSection:\"NTS Mapsheet\",altiSection:\"Elevation\",magSection:\"Magnetic declination\",magDate:\"Date: \",magDecli:\"Magnetic declination (DD): \",magChange:\"Annual change (minutes/year): \",magDecliOut:\"-WARNING- Out of scope.\",magCompassOut:\"-WARNING- Compass erratic for this coordinate.\"},\"fr-CA\":{coordButtonLabel:\"Info coords\",title:\"Information de localisation sur la carte\",coordSection:\"Coordonnées géographiques\",coordLat:\"Latitude : \",coordLong:\"Longitude : \",coordDecimal:\"Degrés décimaux : \",coordDMS:\"Degrés minutes secondes (DMS) : \",utmSection:\"Coordonnées UTM\",utmZone:\"Zone : \",utmEast:\"Abscisse : \",utmNorth:\"Ordonnée : \",ntsSection:\"Carte du SNRC\",altiSection:\"Élévation\",magSection:\"Déclinaison magnétique\",magDate:\"Date : \",magDecli:\"Déclinaison magnétique (DD) : \",magChange:\"Changement annuel (minutes/année) : \",magDecliOut:\"-ATTENTION- Hors de portée.\",magCompassOut:\"-ATTENTION- Boussole peu fiable pour cette coordonnée.\"}},window.coordInfo=i},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.template=\"<div tabindex=\\\"-2\\\"><ul class=\\\"rv-list\\\">\\n    <li>\\n        <strong>{{ 'plugins.coordInfo.coordSection' | translate }}</strong>\\n        <div class=\\\"rv-subsection\\\">\\n            <div>{{ 'plugins.coordInfo.coordDecimal' | translate }}</div>\\n            <div class=\\\"rv-subsection\\\">\\n            <div>{{ 'plugins.coordInfo.coordLat' | translate }}{pt.y}</div>\\n            <div>{{ 'plugins.coordInfo.coordLong' | translate }}{pt.x}</div>\\n            </div>\\n            <div>{{ 'plugins.coordInfo.coordDMS' | translate }}</div>\\n            <div class=\\\"rv-subsection\\\">\\n            <div>{{ 'plugins.coordInfo.coordLat' | translate }}{dms.y}</div>\\n            <div>{{ 'plugins.coordInfo.coordLong' | translate}}{dms.x}</div>\\n            </div>\\n        </div>\\n    </li>\\n    <li>\\n        <strong>{{ 'plugins.coordInfo.utmSection' | translate }}</strong>\\n        <div class=\\\"rv-subsection\\\">\\n            <div>{{ 'plugins.coordInfo.utmZone' | translate }}{zone}</div>\\n            <div>{{ 'plugins.coordInfo.utmEast' | translate }}{outPt.x}</div>\\n            <div>{{ 'plugins.coordInfo.utmNorth' | translate }}{outPt.y}</div>\\n        </div>\\n    </li>\\n    <li>\\n        <strong>{{ 'plugins.coordInfo.ntsSection' | translate }}</strong>\\n        <div class=\\\"rv-subsection\\\">\\n            <div>{nts250}</div>\\n            <div>{nts50}</div>\\n        </div>\\n    </li>\\n    <li>\\n        <strong>{{ 'plugins.coordInfo.altiSection' | translate }}</strong>\\n        <div class=\\\"rv-subsection\\\">{elevation} m</div>\\n    </li>\\n    {magSection}\\n</ul></div>\",e.magSection=\"<li>\\n<strong>{{ 'plugins.coordInfo.magSection' | translate }}</strong>\\n<div class=\\\"rv-subsection\\\">\\n    <div>{{ 'plugins.coordInfo.magDate' | translate }}{date}</div>\\n    <div>{{ 'plugins.coordInfo.magDecli' | translate }}{magnetic}</div>\\n    <div>{{ 'plugins.coordInfo.magChange' | translate }}{annChange}</div>\\n    <div>{compass}</div>\\n</div>\\n</li>\"}]).default;"],"sourceRoot":""}